// @license magnet:?xt=urn:btih:0b31508aeb0634b347b8270c7bee4d411b5d4109&dn=agpl-3.0.txt AGPL-v3.0
!function(e){var n={};function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(r,a,function(n){return e[n]}.bind(null,a));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=79)}({79:function(e,n){function t(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,n){if(e){if("string"==typeof e)return a(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?a(e,n):void 0}}function a(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}document.addEventListener("DOMContentLoaded",(function(){!function(){var e="The email address needs to be ".concat(127," characters or less"),n="The screen name needs to be between ".concat(3," and ").concat(127," characters long."),a="The password needs to be between ".concat(3," and ").concat(100," characters long."),i=window.location.origin,s={eye:"".concat(i,"/images/eye.svg"),eyeCrossed:"".concat(i,"/images/eye-crossed.svg")},o=document.getElementsByClassName("signup-form")[0],c={};function u(e,n,t){e.attachEvent?e.attachEvent("on, ".concat(n,", ").concat(t)):e.addEventListener(n,t)}function l(e){return""!==e.input.value.trim()||(e.valid=!1,e.message="Please enter ".concat(e.label,"."),!1)}function d(e,n,t,r){var a=e.input.value.trim().length;return!(a<n||a>t)||(e.valid=!1,e.message=r,!1)}function f(){var n=c.fields.username;return n.dirty?!!l(n)&&(!!d(n,0,127,e)&&(n.valid=!0,n.message="",!0)):n.valid}function p(){var e=c.fields.screenname;if(!e.dirty)return e.valid;if(!l(e))return!1;if(!d(e,3,127,n))return!1;var t=e.input.value.trim();return/\s{2,}/.test(t)?(e.valid=!1,e.message="The screen name cannot have two or more consecutive spaces.",!1):/^[._-]|[._-]$/.test(t)?(e.valid=!1,e.message="The screen name cannot start or end with a period, dash, or underscore.",!1):(e.valid=!0,e.message="",!0)}function m(){var e=c.fields.password;return e.dirty?(e.valid=!0,e.message="",e.dirty=!1,!!l(e)&&!!d(e,3,100,a)):e.valid}function y(e){e.input&&e.input.classList.remove("error-field"),e.error.innerHTML=""}function v(e){e.success&&(e.valid?e.dirty||(e.success.style.display="inline"):e.success.style.display="none")}function b(e){e.valid?y(e):(e.input&&e.input.classList.add("error-field"),e.error.innerHTML=e.message,"screen name"===e.label&&function(e){var n=document.getElementsByClassName("proposed-screenname")[0];n&&u(n,"click",(function(){e.input.value=event.target.getAttribute("screenname"),e.valid=!0,e.message="",e.dirty=!1,y(e),v(e)}))}(e)),v(e)}function g(e){e.loading&&(e.success&&(e.success.style.display="none"),e.loading.style.display="inline")}function h(e){e.loading&&(e.success&&(e.success.style.display="none"),e.loading.style.display="none")}function w(e){e.xhr&&(e.xhr=null,h(e))}function S(e){var n,t=null,a=function(e,n){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=r(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return o=e.done,e},e:function(e){c=!0,s=e},f:function(){try{o||null==t.return||t.return()}finally{if(c)throw s}}}}(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;switch(i.field){case"username":t=c.fields.username;break;case"screenname":t=c.fields.screenname;break;case"password":t=c.fields.password;break;case"captcha":t=c.hiddenfields.captcha}i.status?(t.valid=!0,i.message=""):(t.valid=!1,t.message=i.message),w(t),b(t),t.dirty=!1}}catch(e){a.e(e)}finally{a.f()}}function q(e){var n,r,a;!0===e.status?(n=encodeURIComponent(c.fields.username.input.value),r=encodeURIComponent(o.querySelector(".login-referer").value),a="".concat(i,"/account/signup?status=verification_mail&email=").concat(n),r.length>0&&(a="".concat(a,"&referer=").concat(r)),window.location.href=a):(S(e),t(o.elements).forEach((function(e){"button"===e.type||"submit"===e.type||"checkbox"===e.type?e.removeAttribute("disabled"):e.readOnly=!1})),h(c.submit))}function x(e){var n=new XMLHttpRequest;return n.open("POST",o.action,!0),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var e=n.responseText;"string"==typeof e&&(e=JSON.parse(e)),q(e)}},n.send(e),n}function O(e,n){n.valid=!0,n.message="",n.dirty=!1,n.xhr&&n.xhr.abort();var t=function(e,n){var t=new FormData;return t.append("input_name",e),t.append("input_value",n),t.append("input_validator",!0),t.append("submit_by_js",!0),t}(e,n.input.value);g(n),n.xhr=x(t)}function _(e){e.preventDefault();var n=function(){var e=!0;return f()||(e=!1),p()||(e=!1),m()||(e=!1),e}();!function(){for(var e in c.fields){if(Object.prototype.hasOwnProperty.call(c.fields,e))b(c.fields[e])}}(),n&&grecaptcha.execute()}function j(){t(o.elements).forEach((function(e){"button"===e.type||"submit"===e.type||"checkbox"===e.type?e.setAttribute("disabled","disabled"):e.readOnly=!0})),g(c.submit),g(c.submit.loading),w(c.fields.username),w(c.fields.screenname),x(function(){var e=o.querySelector(".announce-general").checked?"announce-general":"",n=o.querySelector(".announce-sfbay").checked?"announce-sfbay":"",t=new FormData;return t.append("username",c.fields.username.input.value),t.append("screenname",c.fields.screenname.input.value),t.append("password",c.fields.password.input.value),t.append("referer",o.querySelector(".login-referer").value),t.append("announce-general",e),t.append("announce-sfbay",n),t.append("g-recaptcha-response",c.hiddenfields.captcha.value),t.append("signup_request",!0),t}())}function k(e){13===e.keyCode&&(e.preventDefault(),c.submit.button.click())}function T(){y(c.fields[this.name])}function A(){var e=c.fields[this.name];if(e.dirty)switch(e.message="",e.valid=!1,this.name){case"username":if(f())return void O(this.name,e);break;case"screenname":if(p())return void O(this.name,e);break;case"password":m()}b(e)}function C(){c.fields[this.name].dirty=!0}function E(){var e=c.fields.password.input;"password"===e.type?(e.type="text",this.src=s.eye,this.alt="View text"):(e.type="password",this.src=s.eyeCrossed,this.alt="Hide text")}window.onCaptcha=function(e){c.hiddenfields.captcha.value=e,j()},o&&function(){for(var e in c={submit:{button:o.querySelector(".input-button"),loading:o.querySelector(".loader-img-signup")},hiddenfields:{captcha:{error:o.querySelector(".captcha-error"),input:!1,label:null,value:null}},fields:{username:{valid:!1,dirty:!0,xhr:null,message:"",input:o.querySelector(".input-email"),error:o.querySelector(".username-error"),loading:o.querySelector(".loader-img-username"),success:o.querySelector(".success-img-username"),label:"email address"},screenname:{valid:!1,dirty:!0,xhr:null,message:"",input:o.querySelector(".input-screenname"),error:o.querySelector(".screenname-error"),loading:o.querySelector(".loader-img-screenname"),success:o.querySelector(".success-img-screenname"),label:"screen name"},password:{valid:!1,dirty:!0,message:"",input:o.querySelector(".input-password"),error:o.querySelector(".password-error"),toggle:o.querySelector(".password_icon"),label:"password"}}},u(o,"keyup",k),u(c.submit.button,"click",_),u(c.fields.password.toggle,"click",E),c.fields)if(Object.prototype.hasOwnProperty.call(c.fields,e)){var n=c.fields[e].input;u(n,"change",C),u(n,"focus",T),u(n,"blur",A)}}()}()}))}});
//# sourceMappingURL=signup.min.js.map
// @license-end
